<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kids Learning App â€“ Age 4 Module</title>
  <meta name="description"
        content="Interactive activities for 4â€‘yearâ€‘old kids â€“ alphabets, counting, colors, shapes, matching, tracing & rewards." />
  <style>
    :root{
      --bg:#FFF7E9;--card:#fff;--accent:#5E60CE;
      --primary:#FF8A00;--text:#2B2D42;
      --good:#2ecc71;--bad:#e74c3c;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;height:100%}
    body{
      font-family:system-ui,Arial;
      background:radial-gradient(1200px 500px at 10% -10%,#FFF3C4 0%,#FFF7E9 40%,#FFF7E9 100%);
      color:var(--text);
      -webkit-tap-highlight-color:transparent;
    }
    header{
      position:sticky;top:0;z-index:10;
      display:flex;align-items:center;gap:12px;
      background:#e38b0e;color:#fff;
      padding:14px 16px;
      box-shadow:0 6px 20px rgba(0,0,0,.12);
    }
    .brand{font-weight:800;letter-spacing:.3px;font-size:clamp(18px,3.2vw,28px)}
    .spacer{flex:1}
    .pill{background:rgba(200,200,200,.2);border:2px solid rgba(255,255,255,.35);
          padding:8px 12px;border-radius:999px;
          display:flex;align-items:center;gap:8px;font-weight:700}
    .btn{
      cursor:pointer;border:none;border-radius:16px;padding:12px 16px;
      font-weight:700;font-size:18px;background:var(--accent);color:#fff;
      box-shadow:0 4px 10px rgba(0,0,0,.1)
    }
    .btn.ghost{background:transparent;border:2px solid rgba(255,255,255,.3)}
    .wrap{max-width:1100px;margin:0 auto;padding:18px 16px 60px}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:16px}
    .card{
      background:var(--card);border-radius:24px;padding:18px;
      box-shadow:0 8px 20px rgba(0,0,0,.08);
      transition:.15s all ease;
      display:flex;flex-direction:column;justify-content:space-between;min-height:170px
    }
    .card:hover{transform:translateY(-3px);box-shadow:0 12px 30px rgba(0,0,0,.15)}
    .big-emoji{font-size:44px;text-align:center}
    .screen{display:none;animation:fade .25s ease}
    .screen.active{display:block}
    @keyframes fade{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:none}}
    .center{text-align:center}
    .muted{opacity:.7}
  </style>
</head>
<body>
  <header>
    <div class="brand">ğŸ§¸â€¯Kidsâ€¯Learningâ€¯â€¢â€¯Ageâ€¯4</div>
    <div class="spacer"></div>
    <div class="pill">â­â€¯<span id="stars">0</span>â€¯Stickers</div>
    <button class="btn ghost" id="muteBtn">ğŸ”Šâ€¯Voice</button>
  </header>

  <main class="wrap">
    <!-- HOME SCREEN -->
    <section id="home" class="screen active">
      <p class="center muted">Tap an activity to startâ€¯â€”â€¯earnâ€¯â­â€¯stickersâ€¯asâ€¯youâ€¯play!</p>
      <div class="grid">
        <div class="card" onclick="openScreen('alpha')">
          <div class="big-emoji">ğŸ”¤</div><h3>Alphabetâ€¯&â€¯Phonics</h3><p>Hearâ€¯lettersâ€¯andâ€¯wordsâ€¯aloud.</p>
        </div>
        <div class="card" onclick="openScreen('count')">
          <div class="big-emoji">ğŸ”¢</div><h3>Countingâ€¯1â€¯â€“â€¯10</h3><p>Countâ€¯objectsâ€¯&â€¯pickâ€¯numbers.</p>
        </div>
        <div class="card" onclick="openScreen('paint')">
          <div class="big-emoji">ğŸ¨</div><h3>Colorsâ€¯&â€¯Shapes</h3><p>Tapâ€¯andâ€¯paintâ€¯theâ€¯shapes.</p>
        </div>
        <div class="card" onclick="openScreen('match')">
          <div class="big-emoji">ğŸ§©</div><h3>Matchâ€¯Animals</h3><p>Matchâ€¯picturesâ€¯toâ€¯names.</p>
        </div>
        <div class="card" onclick="openScreen('trace')">
          <div class="big-emoji">âœ</div><h3>Traceâ€¯Letters</h3><p>Drawâ€¯lettersâ€¯onâ€¯screen.</p>
        </div>
      </div>
    </section>
    <!-- ALPHABET & PHONICS SECTION -->
    <section id="alpha" class="screen">
      <div class="toolbar">
        <button class="btn back" onclick="openScreen('home')">ğŸ  Home</button>
        <div class="spacer"></div>
        <button class="btn" onclick="alphaPrev()">â—€ Prev</button>
        <button class="btn" onclick="alphaSpeak()">ğŸ”Š Sayâ€¯It</button>
        <button class="btn" onclick="alphaNext()">Next â–¶</button>
      </div>
      <div class="panel alpha-main">
        <div>
          <div id="alphaLetter" class="alpha-letter">A</div>
          <div id="alphaWord" class="alpha-word">Appleâ€¯ğŸ</div>
        </div>
        <div>
          <p class="center muted">Tapâ€¯aâ€¯letterâ€¯below</p>
          <div id="alphaKeys" class="alpha-keys"></div>
        </div>
      </div>
    </section>

    <style>
      .alpha-main{display:grid;grid-template-columns:1fr 1fr;gap:16px;align-items:center}
      .alpha-letter{font-size:clamp(90px,16vw,160px);font-weight:900;text-align:center;
        background:linear-gradient(180deg,#222,#555);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
      .alpha-word{text-align:center;font-size:clamp(22px,3vw,30px)}
      .alpha-keys{display:grid;grid-template-columns:repeat(13,1fr);gap:5px;margin-top:10px}
      .alpha-keys button{padding:10px;border-radius:12px;border:2px solid #eee;background:#fafafa;font-weight:900;font-size:18px}
    </style>
    <!-- COUNTING SECTION -->
    <section id="count" class="screen">
      <div class="toolbar">
        <button class="btn back" onclick="openScreen('home')">ğŸ  Home</button>
        <div class="spacer"></div>
        <button class="btn" onclick="newCountingRound()">ğŸ” New</button>
      </div>
      <div class="panel">
        <h3 id="countPrompt" class="center">How many do you see?</h3>
        <div id="countItems" class="count-items"></div>
        <div id="countChoices" class="choices"></div>
        <p id="countFeedback" class="center"></p>
      </div>
    </section>

    <style>
      .count-items{
        font-size:40px;
        display:flex;
        flex-wrap:wrap;
        gap:8px;
        justify-content:center;
        padding:8px;
        user-select:none;
      }
      .choices{
        display:flex;
        gap:12px;
        justify-content:center;
        flex-wrap:wrap;
        margin-top:10px;
      }
      .choices button{
        font-size:20px;
        padding:10px 16px;
        border-radius:12px;
        border:2px solid #eee;
        background:#fafafa;
        cursor:pointer;
        font-weight:bold;
      }
      #countFeedback{
        font-size:22px;
        margin-top:10px;
      }
    </style>
    <!-- COLORS & SHAPES SECTION -->
    <section id="paint" class="screen">
      <div class="toolbar">
        <button class="btn back" onclick="openScreen('home')">ğŸ  Home</button>
        <div class="spacer"></div>
        <button class="btn" onclick="resetPaint()">ğŸ§¼ Clear</button>
      </div>
      <div class="panel">
        <p class="center muted">Pick a color, then tap a shape to paint it.</p>
        <div id="palette" class="palette"></div>
        <div class="shapes">
          <svg class="shape" viewBox="0 0 200 200">
            <circle id="shape-circle" cx="100" cy="100" r="70" fill="#fff" stroke="#ccc" stroke-width="6"/>
          </svg>
          <svg class="shape" viewBox="0 0 200 200">
            <rect id="shape-square" x="40" y="40" width="120" height="120" rx="18" fill="#fff" stroke="#ccc" stroke-width="6"/>
          </svg>
          <svg class="shape" viewBox="0 0 200 200">
            <polygon id="shape-triangle" points="100,30 170,170 30,170" fill="#fff" stroke="#ccc" stroke-width="6"/>
          </svg>
        </div>
      </div>
    </section>

    <style>
      .palette{
        display:flex;
        gap:10px;
        flex-wrap:wrap;
        justify-content:center;
        margin:8px 0 14px;
      }
      .swatch{
        width:40px;
        height:40px;
        border-radius:12px;
        border:2px solid rgba(0,0,0,.08);
        cursor:pointer;
      }
      .shapes{
        display:grid;
        grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
        gap:16px;
        place-items:center;
      }
      svg.shape{
        width:160px;
        height:160px;
        filter:drop-shadow(0 4px 10px rgba(0,0,0,.1));
      }
    </style>
    <!-- MATCHING ANIMALS SECTION -->
    <section id="match" class="screen">
      <div class="toolbar">
        <button class="btn back" onclick="openScreen('home')">ğŸ  Home</button>
        <div class="spacer"></div>
        <button class="btn" onclick="resetMatch()">ğŸ”„ Restart</button>
      </div>
      <div class="match-wrap">
        <div class="list">
          <h4 class="center">Animals</h4>
          <div class="item" data-key="cat" onclick="selectFriend(this)">ğŸ±</div>
          <div class="item" data-key="dog" onclick="selectFriend(this)">ğŸ¶</div>
          <div class="item" data-key="fish" onclick="selectFriend(this)">ğŸŸ</div>
        </div>
        <div class="list">
          <h4 class="center">Names</h4>
          <div class="item target" data-key="dog" onclick="placeTo(this)">Dog</div>
          <div class="item target" data-key="fish" onclick="placeTo(this)">Fish</div>
          <div class="item target" data-key="cat" onclick="placeTo(this)">Cat</div>
        </div>
      </div>
      <p id="matchFeedback" class="center muted"></p>
    </section>

    <style>
      .match-wrap{display:grid;grid-template-columns:1fr 1fr;gap:16px}
      .list{background:#fff;border-radius:24px;padding:12px;box-shadow:0 6px 18px rgba(0,0,0,.06)}
      .item{
        display:flex;align-items:center;justify-content:center;gap:8px;
        padding:12px;border:2px dashed #eee;border-radius:16px;
        margin:8px 0;font-size:28px;cursor:pointer
      }
      .target{opacity:.7}
      .matched{background:#E9FCEB;border:2px solid #b6f3bf}
    </style>
    <!-- TRACING LETTERS SECTION -->
    <section id="trace" class="screen">
      <div class="toolbar">
        <button class="btn back" onclick="openScreen('home')">ğŸ  Home</button>
        <div class="spacer"></div>
        <button class="btn" onclick="prevTrace()">â—€ Prev</button>
        <button class="btn" onclick="clearTrace()">ğŸ§¼ Clear</button>
        <button class="btn" onclick="nextTrace()">Next â–¶</button>
      </div>
      <div class="panel trace-wrap">
        <div class="trace-board">
          <div id="traceBg" class="trace-bg">A</div>
          <canvas id="traceCanvas" width="800" height="400"></canvas>
        </div>
        <p class="center muted">Use your finger or mouse to trace the big letter.</p>
      </div>
    </section>

    <style>
      .trace-wrap{display:grid;grid-template-columns:1fr;gap:12px}
      .trace-board{position:relative;border-radius:24px;overflow:hidden;box-shadow:0 8px 24px rgba(0,0,0,.08)}
      .trace-bg{position:absolute;inset:0;display:grid;place-items:center;font-weight:900;
        font-size:clamp(180px,30vw,280px);color:rgba(0,0,0,.06);user-select:none}
      canvas{display:block;width:100%;height:400px;background:#fff;touch-action:none}
    </style></main>
  <div id="toast" class="toast"></div>

  <script>
  const screens=['home','alpha','count','paint','match','trace'];
  const store={stars:0,muted:false};

  function openScreen(id){
    screens.forEach(s=>document.getElementById(s)?.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    if(id==='alpha')alphaMount();
    if(id==='count')newCountingRound();
    if(id==='paint')mountPaint();
    if(id==='trace')mountTrace();
  }

  function toast(msg){
    const t=document.getElementById('toast');
    t.textContent=msg;
    t.classList.add('show');
    setTimeout(()=>t.classList.remove('show'),1200);
  }

  const voice={speak(txt){
    if(store.muted)return;
    try{
      const u=new SpeechSynthesisUtterance(txt);
      speechSynthesis.cancel();
      speechSynthesis.speak(u);
    }catch(e){}
  }};

  document.getElementById('muteBtn').addEventListener('click',()=>{
    store.muted=!store.muted;updateMuteUI();
  });
  function updateMuteUI(){
    document.getElementById('muteBtn').textContent=store.muted?'ğŸ”‡ Muted':'ğŸ”Š Voice';
  }

  function awardStar(){
    store.stars++;
    document.getElementById('stars').textContent=store.stars;
    toast('â­â€¯Yay!â€¯Youâ€¯earnedâ€¯aâ€¯sticker!');
  }

  /* ---------- Alphabet ---------- */
  const ALPHA=[
    ["A","Apple"],["B","Ball"],["C","Cat"],["D","Dog"],["E","Elephant"],
    ["F","Fish"],["G","Grapes"],["H","Hen"],["I","Ice cream"],["J","Juice"],
    ["K","Kite"],["L","Lion"],["M","Monkey"],["N","Nest"],["O","Orange"],
    ["P","Parrot"],["Q","Queen"],["R","Rainbow"],["S","Sun"],["T","Tiger"],
    ["U","Umbrella"],["V","Violin"],["W","Whale"],["X","Xylophone"],
    ["Y","Yak"],["Z","Zebra"]
  ];
  let alphaIndex=0,alphaKeysBuilt=false;
  function alphaMount(){
    if(!alphaKeysBuilt){
      const wrap=document.getElementById('alphaKeys');
      ALPHA.forEach((row,i)=>{
        const b=document.createElement('button');
        b.textContent=row[0];
        b.onclick=()=>{alphaIndex=i;updateAlphaUI();alphaSpeak();};
        wrap.appendChild(b);
      });
      alphaKeysBuilt=true;
    }
    updateAlphaUI();
  }
  function updateAlphaUI(){
    document.getElementById('alphaLetter').textContent=ALPHA[alphaIndex][0];
    document.getElementById('alphaWord').textContent=ALPHA[alphaIndex][1];
  }
  function alphaPrev(){alphaIndex=(alphaIndex-1+ALPHA.length)%ALPHA.length;updateAlphaUI();alphaSpeak();}
  function alphaNext(){alphaIndex=(alphaIndex+1)%ALPHA.length;updateAlphaUI();alphaSpeak();}
  function alphaSpeak(){
    const [L,W]=ALPHA[alphaIndex];
    voice.speak(L+", "+W);
    awardStar();
  }

  /* ---------- Counting ---------- */
  const COUNT_EMOJIS=['ğŸ','ğŸ§¸','ğŸˆ','â­','ğŸ§','ğŸ ','ğŸš—','ğŸŒ¸','ğŸª','ğŸ‰'];
  let correctAnswer=0;
  function newCountingRound(){
    const itemsBox=document.getElementById('countItems');
    const choices=document.getElementById('countChoices');
    const feedback=document.getElementById('countFeedback');
    feedback.textContent='';
    itemsBox.innerHTML='';
    choices.innerHTML='';
    const n=1+Math.floor(Math.random()*10);
    correctAnswer=n;
    const icon=COUNT_EMOJIS[Math.floor(Math.random()*COUNT_EMOJIS.length)];
    for(let i=0;i<n;i++){const span=document.createElement('span');span.textContent=icon;itemsBox.appendChild(span);}
    const opts=new Set([n]);
    while(opts.size<3){opts.add(1+Math.floor(Math.random()*10));}
    [...opts].sort(()=>Math.random()-.5).forEach(v=>{
      const b=document.createElement('button');
      b.textContent=v;
      b.className='btn';
      b.onclick=()=>checkCount(v);
      choices.appendChild(b);
    });
  }
  function checkCount(v){
    const feedback=document.getElementById('countFeedback');
    if(v===correctAnswer){
      feedback.textContent='âœ… Correct!';
      feedback.style.color='green';
      voice.speak('Correct');
      awardStar();
      newCountingRound();
    }else{
      feedback.textContent='âŒ Try again';
      feedback.style.color='red';
      voice.speak('Try again');
    }
  }

  /* ---------- Colors & Shapes ---------- */
  const PALETTE=['#FF595E','#FFCA3A','#8AC926','#1982C4','#6A4C93','#FF8A00','#00C2A8','#F72585'];
  let currentColor=PALETTE[0];let paintMounted=false;
  function mountPaint(){
    if(paintMounted)return;
    paintMounted=true;
    const pal=document.getElementById('palette');
    PALETTE.forEach(c=>{
      const d=document.createElement('button');
      d.className='swatch';
      d.style.background=c;
      d.onclick=()=>{currentColor=c;voice.speak('Color selected');};
      pal.appendChild(d);
    });
    ['shape-circle','shape-square','shape-triangle'].forEach(id=>{
      document.getElementById(id).addEventListener('click',()=>{
        document.getElementById(id).setAttribute('fill',currentColor);
        awardStar();
      });
    });
  }
  function resetPaint(){
    ['shape-circle','shape-square','shape-triangle']
      .forEach(id=>document.getElementById(id).setAttribute('fill','#fff'));
  }

  /* ---------- Matching Animals ---------- */
  let selectedFriend=null,matchedCount=0;
  function selectFriend(el){
    if(el.classList.contains('matched'))return;
    document.querySelectorAll('#match .item').forEach(i=>i.classList.remove('active'));
    el.classList.add('active');
    selectedFriend=el;
  }
  function placeTo(target){
    if(!selectedFriend){toast('Pick an animal first');return;}
    const ok=selectedFriend.dataset.key===target.dataset.key;
    if(ok){
      target.classList.add('matched');
      target.textContent+=' âœ…';
      selectedFriend.classList.add('matched');
      matchedCount++;
      voice.speak('Correct');
      toast('âœ… Correct!');
      awardStar();
      if(matchedCount>=3)toast('â­ All matched!');
    }else{
      voice.speak('Try again');
      toast('âŒ Try again');
    }
    selectedFriend=null;
  }
  function resetMatch(){
    matchedCount=0;selectedFriend=null;
    document.querySelectorAll('#match .item').forEach(i=>{
      i.classList.remove('matched','active');
      const k=i.dataset.key;
      i.textContent=i.classList.contains('target')?k.charAt(0).toUpperCase()+k.slice(1):(k==='cat'?'ğŸ±':k==='dog'?'ğŸ¶':'ğŸŸ');
    });
  }

  /* ---------- Tracing ---------- */
  let traceCanvas,ctx,drawing=false,last=null,traceIndex=0,lengthDrawn=0;
  const TRACE_LETTERS='ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');
  function mountTrace(){
    traceCanvas=document.getElementById('traceCanvas');
    ctx=traceCanvas.getContext('2d');
    traceCanvas.addEventListener('pointerdown',startDraw);
    traceCanvas.addEventListener('pointermove',moveDraw);
    window.addEventListener('pointerup',endDraw);
    updateTraceBg();
    clearTrace();
  }
  function updateTraceBg(){document.getElementById('traceBg').textContent=TRACE_LETTERS[traceIndex];}
  function startDraw(e){drawing=true;last=getPos(e);drawDot(last);}
  function moveDraw(e){
    if(!drawing)return;
    const p=getPos(e);
    ctx.beginPath();
    ctx.moveTo(last.x,last.y);
    ctx.lineTo(p.x,p.y);
    ctx.lineWidth=18;
    ctx.lineCap='round';
    ctx.strokeStyle='#000';
    ctx.globalAlpha=.85;
    ctx.stroke();
    lengthDrawn+=Math.hypot(p.x-last.x,p.y-last.y);
    last=p;
    if(lengthDrawn>1500){awardStar();lengthDrawn=0;}
  }
  function endDraw(){drawing=false;last=null;}
  function getPos(e){
    const r=traceCanvas.getBoundingClientRect();
    return {
      x:(e.clientX-r.left)*(traceCanvas.width/r.width),
      y:(e.clientY-r.top)*(traceCanvas.height/r.height)
    };
  }
  function drawDot(p){
    ctx.beginPath();
    ctx.arc(p.x,p.y,9,0,Math.PI*2);
    ctx.fillStyle='#000';
    ctx.globalAlpha=.85;
    ctx.fill();
  }
  function clearTrace(){ctx.clearRect(0,0,traceCanvas.width,traceCanvas.height);lengthDrawn=0;}
  function prevTrace(){
    traceIndex=(traceIndex-1+TRACE_LETTERS.length)%TRACE_LETTERS.length;
    updateTraceBg();clearTrace();voice.speak(TRACE_LETTERS[traceIndex]);
  }
  function nextTrace(){
    traceIndex=(traceIndex+1)%TRACE_LETTERS.length;
    updateTraceBg();clearTrace();voice.speak(TRACE_LETTERS[traceIndex]);
  }
  </script>
</body>
</html>